[gd_resource type="VisualShader" load_steps=37 format=3 uid="uid://dwisrl3r6l5m7"]

[ext_resource type="Texture2D" uid="uid://ca6qgtvvgx7lp" path="res://Assets/Environment/TunnelIdMap.png" id="1_rmxak"]
[ext_resource type="Script" path="res://Scripts/IdMap/Idmap.gd" id="2_i7wh8"]

[sub_resource type="Gradient" id="Gradient_pdgbq"]
interpolation_mode = 1
offsets = PackedFloat32Array(0, 0.96319)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_apfkp"]
noise_type = 2
fractal_type = 0
cellular_jitter = 0.68
cellular_return_type = 6

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_b6f75"]
width = 1024
height = 1024
color_ramp = SubResource("Gradient_pdgbq")
noise = SubResource("FastNoiseLite_apfkp")

[sub_resource type="VisualShaderNodeTexture" id="VisualShaderNodeTexture_rwdcl"]
texture = SubResource("NoiseTexture2D_b6f75")

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_7jauw"]
operator = 2

[sub_resource type="VisualShaderNodeUVFunc" id="VisualShaderNodeUVFunc_ju0tu"]

[sub_resource type="VisualShaderNodeVectorCompose" id="VisualShaderNodeVectorCompose_u4h2k"]
op_type = 0

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_osibp"]
default_input_values = [0, 0.0, 1, 1.0]
operator = 2

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_ci8ck"]
input_name = "time"

[sub_resource type="VisualShaderNodeRandomRange" id="VisualShaderNodeRandomRange_j636f"]

[sub_resource type="Gradient" id="Gradient_3tiri"]
offsets = PackedFloat32Array(0, 0.503067)
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_rsxhf"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_81ry7"]
color_ramp = SubResource("Gradient_3tiri")
noise = SubResource("FastNoiseLite_rsxhf")

[sub_resource type="VisualShaderNodeTexture" id="VisualShaderNodeTexture_vl0lt"]
texture = SubResource("NoiseTexture2D_81ry7")

[sub_resource type="VisualShaderNodeTexture" id="VisualShaderNodeTexture_6j26a"]
texture = ExtResource("1_rmxak")

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_ocr8l"]
operator = 2

[sub_resource type="VisualShaderNodeColorConstant" id="VisualShaderNodeColorConstant_0ai13"]
constant = Color(0.337255, 1, 1, 1)

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_b55op"]
operator = 2

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_6oscl"]
operator = 2

[sub_resource type="VisualShaderNodeColorConstant" id="VisualShaderNodeColorConstant_ib52m"]
constant = Color(0, 0, 0, 1)

[sub_resource type="VisualShaderNodeColorConstant" id="VisualShaderNodeColorConstant_syyaq"]
constant = Color(0.0846899, 0.08469, 0.0846899, 1)

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_clk5q"]
default_input_values = [0, Vector3(1, 1, 1), 1, Vector3(0, 0, 0)]
operator = 1

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_d0ufu"]
operator = 2

[sub_resource type="VisualShaderNodeCustom" id="VisualShaderNodeCustom_xq1j5"]
initialized = true
script = ExtResource("2_i7wh8")

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_ljeoh"]

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_5m3wm"]
operator = 2

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_a4i7l"]
operator = 2

[sub_resource type="VisualShaderNodeColorConstant" id="VisualShaderNodeColorConstant_boso4"]

[sub_resource type="VisualShaderNodeCustom" id="VisualShaderNodeCustom_wf3dj"]
initialized = true
script = ExtResource("2_i7wh8")

[sub_resource type="VisualShaderNodeCustom" id="VisualShaderNodeCustom_37lf4"]
initialized = true
script = ExtResource("2_i7wh8")

[sub_resource type="VisualShaderNodeColorConstant" id="VisualShaderNodeColorConstant_4cc3y"]
constant = Color(0, 0, 1, 1)

[sub_resource type="VisualShaderNodeColorConstant" id="VisualShaderNodeColorConstant_owqko"]
constant = Color(1, 0, 0, 1)

[sub_resource type="VisualShaderNodeColorConstant" id="VisualShaderNodeColorConstant_d6sty"]
constant = Color(0, 1, 0, 1)

[sub_resource type="VisualShaderNodeFloatConstant" id="VisualShaderNodeFloatConstant_fxyia"]

[resource]
code = "shader_type spatial;
render_mode blend_mix, depth_draw_opaque, cull_back, diffuse_lambert, specular_schlick_ggx;

uniform sampler2D tex_frg_19;
uniform sampler2D tex_frg_10;
uniform sampler2D tex_frg_2;




// 3D Noise with friendly permission by Inigo Quilez
vec3 hash_noise_range( vec3 p ) {
	p *= mat3(vec3(127.1, 311.7, -53.7), vec3(269.5, 183.3, 77.1), vec3(-301.7, 27.3, 215.3));
	return 2.0 * fract(fract(p)*4375.55) -1.;
}

// IdMap

		vec3 GetMask(vec3 colorId, vec3 idMap) {
		float tolerance = 0.01;

		// Vector Decompose Color Id
			float colorId_R = colorId.x;
			float colorId_G = colorId.y;
			float colorId_B = colorId.z;

		// Decompose IdMap
			float idMap_R = idMap.x;
			float idMap_G = idMap.y;
			float idMap_B = idMap.z;

		// subtract R
			float result_R = colorId_R - idMap_R;

		// Compare R
			bool compare_R = (abs(result_R) < tolerance);

		// Subtract G
			float result_G = colorId_G - idMap_G;

		// Compare G
			bool compare_G = (abs(result_G) < tolerance);

		// Subtract B
			float result_B = colorId_B - idMap_B;

		// Compare B
			bool compare_B = (abs(result_B) < tolerance);

		// Divide R_G By B
			float result_R_G_B = ((compare_R ? 1.0 : 0.0) / (compare_G ? 1.0 : 0.0)) / (compare_B ? 1.0 : 0.0);
			result_R_G_B = abs(result_R_G_B) == 1.0 ? 1.0 : 0.0;
			
		// result
			return vec3(result_R_G_B);

		}
	

void fragment() {
// ColorConstant:27
	vec4 n_out27p0 = vec4(0.084690, 0.084690, 0.084690, 1.000000);


// Input:17
	float n_out17p0 = TIME;


// RandomRange:18
	float n_in18p1 = 0.00000;
	float n_in18p2 = 1.00000;
	float n_out18p0 = mix(n_in18p1, n_in18p2, hash_noise_range(vec3(n_out17p0)).x);


// FloatOp:16
	float n_out16p0 = n_out17p0 * n_out18p0;


// VectorCompose:15
	vec2 n_out15p0 = vec2(n_out16p0, n_out16p0);


// UVFunc:14
	vec2 n_in14p1 = vec2(1.00000, 1.00000);
	vec2 n_out14p0 = n_out15p0 * n_in14p1 + UV;


// Texture2D:19
	vec4 n_out19p0 = texture(tex_frg_19, n_out14p0);


// ColorConstant:21
	vec4 n_out21p0 = vec4(0.337255, 1.000000, 1.000000, 1.000000);


// Texture2D:10
	vec4 n_out10p0 = texture(tex_frg_10, n_out14p0);


// VectorOp:22
	vec3 n_out22p0 = vec3(n_out21p0.xyz) * vec3(n_out10p0.xyz);


// VectorOp:20
	vec3 n_out20p0 = vec3(n_out19p0.xyz) * n_out22p0;


// VectorOp:28
	vec3 n_in28p0 = vec3(1.00000, 1.00000, 1.00000);
	vec3 n_out28p0 = n_in28p0 - n_out20p0;


// VectorOp:29
	vec3 n_out29p0 = vec3(n_out27p0.xyz) * n_out28p0;


// ColorConstant:7
	vec4 n_out7p0 = vec4(1.000000, 0.000000, 0.000000, 1.000000);


// FloatConstant:9
	float n_out9p0 = 0.000000;


// Texture2D:2
	vec4 n_out2p0 = textureLod(tex_frg_2, UV, n_out9p0);


	vec3 n_out4p0;
// IdMap:4
	{
		n_out4p0 = GetMask(vec3(n_out7p0.xyz), vec3(n_out2p0.xyz));
	}


// VectorOp:31
	vec3 n_out31p0 = n_out29p0 * n_out4p0;


// VectorOp:13
	vec3 n_out13p0 = n_out20p0 * n_out4p0;


// VectorOp:30
	vec3 n_out30p0 = n_out31p0 + n_out13p0;


// ColorConstant:25
	vec4 n_out25p0 = vec4(0.000000, 0.000000, 0.000000, 1.000000);


// VectorOp:24
	vec3 n_out24p0 = vec3(n_out25p0.xyz) * n_out4p0;


// ColorConstant:33
	vec4 n_out33p0 = vec4(1.000000, 1.000000, 1.000000, 1.000000);


// VectorOp:32
	vec3 n_out32p0 = n_out4p0 * vec3(n_out33p0.xyz);


// Output:0
	ALBEDO = n_out30p0;
	ROUGHNESS = n_out24p0.x;
	EMISSION = n_out13p0;
	SSS_STRENGTH = n_out32p0.x;


}
"
graph_offset = Vector2(-390.676, -218.718)
nodes/fragment/0/position = Vector2(910, 140)
nodes/fragment/2/node = SubResource("VisualShaderNodeTexture_6j26a")
nodes/fragment/2/position = Vector2(-1260, 380)
nodes/fragment/3/node = SubResource("VisualShaderNodeCustom_xq1j5")
nodes/fragment/3/position = Vector2(-800, 420)
nodes/fragment/4/node = SubResource("VisualShaderNodeCustom_wf3dj")
nodes/fragment/4/position = Vector2(-800, 220)
nodes/fragment/5/node = SubResource("VisualShaderNodeCustom_37lf4")
nodes/fragment/5/position = Vector2(-800, 320)
nodes/fragment/6/node = SubResource("VisualShaderNodeColorConstant_4cc3y")
nodes/fragment/6/position = Vector2(-1200, 300)
nodes/fragment/7/node = SubResource("VisualShaderNodeColorConstant_owqko")
nodes/fragment/7/position = Vector2(-1200, 140)
nodes/fragment/8/node = SubResource("VisualShaderNodeColorConstant_d6sty")
nodes/fragment/8/position = Vector2(-1200, 220)
nodes/fragment/9/node = SubResource("VisualShaderNodeFloatConstant_fxyia")
nodes/fragment/9/position = Vector2(-1520, 500)
nodes/fragment/10/node = SubResource("VisualShaderNodeTexture_rwdcl")
nodes/fragment/10/position = Vector2(-1414, -490)
nodes/fragment/13/node = SubResource("VisualShaderNodeVectorOp_7jauw")
nodes/fragment/13/position = Vector2(-658, -574)
nodes/fragment/14/node = SubResource("VisualShaderNodeUVFunc_ju0tu")
nodes/fragment/14/position = Vector2(-1778, -574)
nodes/fragment/15/node = SubResource("VisualShaderNodeVectorCompose_u4h2k")
nodes/fragment/15/position = Vector2(-2016, -560)
nodes/fragment/16/node = SubResource("VisualShaderNodeFloatOp_osibp")
nodes/fragment/16/position = Vector2(-2212, -560)
nodes/fragment/17/node = SubResource("VisualShaderNodeInput_ci8ck")
nodes/fragment/17/position = Vector2(-2814, -574)
nodes/fragment/18/node = SubResource("VisualShaderNodeRandomRange_j636f")
nodes/fragment/18/position = Vector2(-2450, -434)
nodes/fragment/19/node = SubResource("VisualShaderNodeTexture_vl0lt")
nodes/fragment/19/position = Vector2(-1358, -812)
nodes/fragment/20/node = SubResource("VisualShaderNodeVectorOp_ocr8l")
nodes/fragment/20/position = Vector2(-938, -616)
nodes/fragment/21/node = SubResource("VisualShaderNodeColorConstant_0ai13")
nodes/fragment/21/position = Vector2(-1358, -574)
nodes/fragment/22/node = SubResource("VisualShaderNodeVectorOp_b55op")
nodes/fragment/22/position = Vector2(-1162, -560)
nodes/fragment/24/node = SubResource("VisualShaderNodeVectorOp_6oscl")
nodes/fragment/24/position = Vector2(-658, -392)
nodes/fragment/25/node = SubResource("VisualShaderNodeColorConstant_ib52m")
nodes/fragment/25/position = Vector2(-952, -420)
nodes/fragment/27/node = SubResource("VisualShaderNodeColorConstant_syyaq")
nodes/fragment/27/position = Vector2(-672, -840)
nodes/fragment/28/node = SubResource("VisualShaderNodeVectorOp_clk5q")
nodes/fragment/28/position = Vector2(-672, -756)
nodes/fragment/29/node = SubResource("VisualShaderNodeVectorOp_d0ufu")
nodes/fragment/29/position = Vector2(-434, -770)
nodes/fragment/30/node = SubResource("VisualShaderNodeVectorOp_ljeoh")
nodes/fragment/30/position = Vector2(-42, -588)
nodes/fragment/31/node = SubResource("VisualShaderNodeVectorOp_5m3wm")
nodes/fragment/31/position = Vector2(-238, -700)
nodes/fragment/32/node = SubResource("VisualShaderNodeVectorOp_a4i7l")
nodes/fragment/32/position = Vector2(-56, -392)
nodes/fragment/33/node = SubResource("VisualShaderNodeColorConstant_boso4")
nodes/fragment/33/position = Vector2(-672, -210)
nodes/fragment/connections = PackedInt32Array(7, 0, 4, 0, 6, 0, 3, 0, 8, 0, 5, 0, 2, 0, 5, 1, 2, 0, 4, 1, 2, 0, 3, 1, 9, 0, 2, 1, 4, 0, 13, 1, 14, 0, 10, 0, 15, 0, 14, 2, 16, 0, 15, 1, 17, 0, 16, 0, 18, 0, 16, 1, 17, 0, 18, 0, 16, 0, 15, 0, 14, 0, 19, 0, 19, 0, 20, 0, 20, 0, 13, 0, 21, 0, 22, 0, 10, 0, 22, 1, 22, 0, 20, 1, 4, 0, 24, 1, 25, 0, 24, 0, 24, 0, 0, 3, 27, 0, 29, 0, 28, 0, 29, 1, 13, 0, 30, 1, 29, 0, 31, 0, 4, 0, 31, 1, 31, 0, 30, 0, 30, 0, 0, 0, 13, 0, 0, 5, 20, 0, 28, 1, 4, 0, 32, 0, 33, 0, 32, 1, 32, 0, 0, 17)
